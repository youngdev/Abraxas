package com.fifthdimensionsoftware.asm.types;

import com.fifthdimensionsoftware.asm.ArmCore;

public class MEM extends ARG
{
	public MEM(String argData) 
	{
		super(argData);
	}

	public int resolveArgument()
	{
		if(!argData.trim().startsWith("[^"))
			return ArmCore.getInstance().getMemory(Integer.parseInt(argData.replace("[", "").replace("]", "")));
		else
			return ArmCore.getInstance().getMemory(ArmCore.getInstance().getVar(argData.replace("[^", "").replace("]", "")).resolveArgument());
	}
	
	public int resolveAddress()
	{
		if(argData.trim().startsWith("[0B"))
			return Integer.parseInt(argData.replace("0B", "").replace("[", "").replace("]", ""), 2);
		if(argData.trim().startsWith("[0X"))
			return Integer.parseInt(argData.replace("0X", "").replace("[", "").replace("]", ""), 16);
		if(!argData.trim().startsWith("[^"))
			return Integer.parseInt(argData.replace("[", "").replace("]", ""));
		else
			return ArmCore.getInstance().getVar(argData.replace("[^", "").replace("]", "")).resolveArgument();
	}
	
}
