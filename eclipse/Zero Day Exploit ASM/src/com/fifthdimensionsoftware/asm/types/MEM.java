package com.fifthdimensionsoftware.asm.types;

import com.fifthdimensionsoftware.asm.ArmCore;

public class MEM extends ARG
{
	public MEM(String argData) 
	{
		super(argData);
	}

	public int resolveArgument()
	{
		return ArmCore.getInstance().getMemory(this.resolveAddress());
	}
	
	public int resolveAddress()
	{
		if(argData.toUpperCase().trim().startsWith("[0B"))
			return Integer.parseInt(argData.replace("0B", "").replace("[", "").replace("]", ""), 2);
		if(argData.toUpperCase().trim().startsWith("[0X"))
			return Integer.parseInt(argData.replace("0X", "").replace("[", "").replace("]", ""), 16);
		if(argData.trim().startsWith("[^"))
			return ArmCore.getInstance().getVar(argData.replace("[^", "").replace("]", "")).resolveArgument();
		if(argData.trim().startsWith("[:"))
			return ArmCore.getInstance().labels.get(argData.replace("[", "").replace("]", "").trim());
		return Integer.parseInt(argData.replace("[", "").replace("]", ""));
	}
	
	public String resolveString()
	{
		return argData.trim().startsWith("[:") ? "label " + argData.replace("[:", "").replace("]", "").trim() + " at address " + this.resolveAddress() : this.resolveAddress()+"";
	}
}
