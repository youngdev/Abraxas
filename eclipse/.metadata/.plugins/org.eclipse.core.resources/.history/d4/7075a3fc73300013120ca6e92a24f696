package com.fifthdimensionsoftware.zero.graphics;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Properties;

import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;
import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.BasicGame;
import org.newdawn.slick.GameContainer;
import org.newdawn.slick.Graphics;
import org.newdawn.slick.SlickException;

public class GLComplex extends BasicGame
{	
	
	private boolean inGame = false;
	private Properties saveProperties = new Properties();
	
	private static class ZeroContainer extends AppGameContainer
	{

		public ZeroContainer() throws SlickException {
			super(new GLComplex(), GraphicsUtil.getScreenWidth(), GraphicsUtil.getScreenHeight(), false);
			System.setProperty("org.lwjgl.opengl.Window.undecorated", "true");
			Display.setLocation(0, 0);
			this.setShowFPS(false);
			this.setClearEachFrame(false);
			this.setVerbose(true);
		}
		
	}
	
	private GLComplex()
	{
		super("Zero Day Exploit");
	}
	
	public static void beginGL()
	{
			try {
			new ZeroContainer().start();
		} catch (SlickException e) {
			e.printStackTrace();
		}
	}
	
	@Override
	public void render(GameContainer arg0, Graphics arg1) throws SlickException
	{
		
	}

	@Override
	public void init(GameContainer arg0) throws SlickException
	{
		GraphicsUtil.displayLoadingImage("loadingImage.png", arg0.getGraphics(), 5000);
		//AudioUtil.loadSound("res.bin/03.wav", true, false);
	}

	@Override
	public void update(GameContainer arg0, int arg1) throws SlickException
	{
		if(Keyboard.isKeyDown(Keyboard.KEY_0))
		{
			GraphicsUtil.takeScreenShot(0, 0, GraphicsUtil.getScreenWidth(), GraphicsUtil.getScreenHeight(), "image.png");
		}
	}
	
	public boolean isInGame()
	{
		return this.inGame;
	}
	
	public void beginGame(File gameFile)
	{
		this.inGame = true;
		try {
			this.saveProperties.load(new FileInputStream(gameFile));
		} catch (IOException e) {
			e.printStackTrace();
		}
	}
}
