? sp = r13 ?
? @512@ = r2 ?
? id = r1 ?
? ct = r0 ?
;Set up stack
	MOV sp, #:stack:
	ADD sp, sp, r15
	SUB sp, sp, #4
	MOV r1, #4
	STR r0, r1, sp
	MOV r1, #0
;Stack complete, with no ill effects
;Count the disks, initialize a constant register
	CTD ct
	MOV @512@, #512
:loop:
	;Load the first 512 bytes into memory
	DLDR @512@, r9, @512@, id
	;Test if the final integer in the first 512 bytes of the disk is 0x7ff. If so, begin boot sequence
	LDR @512@, r3, #508
	CMP r3, #0x7ff
	BEQ #:boot:
	
	;Increment the loop, apply calculations
	ADD id, id, #1
	CMP ct, id
	BNE #:loop:
	;No disks found, display message here
	HLT
;Boot sector loaded, prepare for far jump
:boot:
	MOV ct, #0
	MOV @512@, #0
	MOV r3, #0
	MOV id, #0
	;TAKE THE LEAP!
	MOV r15, #512
	HLT
:stack: