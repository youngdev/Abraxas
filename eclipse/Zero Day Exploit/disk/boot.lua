local core = luajava.getCore()
local windowManager = core:getRootManager()
local screen2 = windowManager --core:getManager(0)
local fileOut = core:openPrintStream("traceTracker.lua", true)
local fileIn = core:openScanner("payload.txt")
local prop = core:openProperties("test.txt")
local lang = core:openLang("en_US")
local isSoftware = false
local coreNotify = core:getNotifier()

function bootUplink()

core:getScreen():setColor(core:createColor(0,0,0))
core:getScreen():fillRect(0,0,core:rootWidth(), core:rootHeight())
--Buttons
core:getScreen():setColor(core:createColor(0,0,255))
core:getScreen():drawImage(core:getResource("software"), 10, core:rootHeight() - 63, 53, 53)
core:getScreen():drawImage(core:getResource("hardware"), 73, core:rootHeight() - 34, 24, 24)
core:getScreen():fillRect(5,5,15,15)
windowManager:addWindow(0,0,core:rootWidth(), core:rootHeight(),"root")
windowManager:getWindow("root"):updateStyle("FREE")
windowManager:getWindow("root"):updateNext()
windowManager:getWindow("root"):addMouseRegion("software", "boot", 10, core:rootHeight() - 63, 53, 53)

end
function boot()
core:getScreen():drawImage(core:generatePattern(core:getResourceLegacy("Pattern_Cube"), core:rootWidth(), core:rootHeight()), 0, 0, core:rootWidth(), core:rootHeight(), nil)
core:getScreen():drawImage(core:generateBorder(core:createColorLegacy(0,0,0,255), core:rootWidth(), core:rootHeight(), 10), 0, 0, core:rootWidth(), core:rootHeight(), nil)
windowManager:addWindow(core:rootWidth()/2-250,core:rootHeight()/2-100,500,200,lang:getKey("BootTitle"))
windowManager:windowSurface(lang:getKey("BootTitle")):setColor(core:createColor(255,255,255,255))
windowManager:windowSurface(lang:getKey("BootTitle")):drawImage(core:vertGradient(core:createColorLegacy(95,1,1,255), core:createColorLegacy(181,10,10,255), 500, 200), 0,20,500,180, nil)
windowManager:windowSurface(lang:getKey("BootTitle")):drawString(lang:getKey("BootText"),5,35)
windowManager:windowSurface(lang:getKey("BootTitle")):drawString(lang:getKey("BootWait"),5,192)

screen2:addWindow(50,50,500,200,"WINDOWTITLE")
screen2:getWindow("WINDOWTITLE"):updateColors(core:createColorLegacy(0,0,0,255), core:createColorLegacy(0,0,255,255), core:createColorLegacy(0,0,0,255))
screen2:windowSurface("WINDOWTITLE"):drawImage(core:vertGradient(core:createColorLegacy(0,0,255,255), core:createColorLegacy(0,0,0,255), 500, 200), 0,20,500,180, nil)
windowManager:getWindow("WINDOWTITLE"):addMouseRegion("INTERNALDRAG", "", 0,0,500,20)

windowManager:getWindow(lang:getKey("BootTitle")):addMouseRegion("INTERNALDRAG", "", 0,0,500,20)
windowManager:getWindow(lang:getKey("BootTitle")):addTextBox("TEST", 5, 160, 200, 16, "copy", "boot")

windowManager:getWindow(lang:getKey("BootTitle")):addTextBox("HARPDARP", 5, 144, 200, 16, "killRate", "boot")

windowManager:getWindow(lang:getKey("BootTitle")):textbox("HARPDARP"):setColors(core:createColor(0,0,0), core:createColor(0,0,255), core:createColor(255,255,255))
windowManager:getWindow(lang:getKey("BootTitle")):addCheckBox("BOX", 5,144-16)
--This DESTROYS FRAMERATE!
--windowManager:getWindow(lang:getKey("BootTitle")):enableUpdates(true)

--screen2:repaint()

--coreNotify:pushCodeMessage("Bootpro Industries Operating System", "software", "Booting", "Booting complete!")
end
function allocate()
core:allocateResourceFromDisk("software")
core:allocateResourceFromDisk("hardware")
end
function postRender(window)
--Normally, this would draw things like the close and minimize boxes
end
function killRate()
--core:executeAsync(windowManager:getWindow(lang:getKey("BootTitle")):textbox("HARPDARP"):getText())
--windowManager:getWindow(lang:getKey("BootTitle")):enableUpdates(true)
coreNotify:pushCodeMessage("Bootpro Industries Operating System", "software", "Notification", windowManager:getWindow(lang:getKey("BootTitle")):textbox("HARPDARP"):getText())
core:rebootSystem()
end
function copy()
fileOut:println()
while(fileIn:hasNextLine()) do
fileOut:println(fileIn:nextLine())
end
end

function software()

windowManager:getWindow("root"):addCheckBox("CHECK",0,0)

end