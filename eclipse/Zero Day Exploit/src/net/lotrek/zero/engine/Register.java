package net.lotrek.zero.engine;

import java.util.HashMap;

import net.lotrek.zero.engine.Processor.ProcessorMode;

public class Register
{
	public static void initializeRegisters(HashMap<String, Register> registerMap)
	{
		registerMap.put("cpsr", new Register("cpsr"));
		registerMap.put("pc", new Register("pc"));
		registerMap.put("ivt", new Register("ivt"));
		
		for(int id = 0; id < 17; id++)
		{
			if(id == 15 || id == 12)
				continue;
			for(ProcessorMode mode : ProcessorMode.values())
				registerMap.put("r"+ id + "_" + mode.name(), new Register("r"+ id + "_" + mode.name()));
		}
	}
	
	private String name;
	private int value = 0;
	
	public Register(String name)
	{
		this.name = name;
	}
	
	public String getName()
	{
		return name;
	}
	
	public int getValue()
	{
		return value;
	}
	
	public void setValue(int param)
	{
		if(!((this.getName().contains("pc") || this.getName().contains("ivt")) && Processor.getInstance().getMode() == ProcessorMode.USR))
			this.value = param;
	}
	
	public void forceValue(int param)
	{
		this.value = param;
	}
	
	public String toString()
	{
		return this.getName() + " - " + this.value;
	}
}
