package net.lotrek.zero.story;

import net.lotrek.zero.engine.Processor;
import net.lotrek.zero.tools.TimeUtil;

public abstract class Event
{
	public abstract void evaluate();
	
	public static class EmailEvent extends Event
	{
		public EmailEvent(String subject, String keyword, String label, String altLabel)
		{
		}
		
		public void evaluate()
		{
		}
	}
	
	public static class CalEvent extends Event
	{
		private int hour, minute, year, day, month;
		private String label;
		
		public CalEvent(int hour, int minute, int year, int day, int month, String label)
		{
			this.hour = hour;
			this.minute = minute;
			this.year = year;
			this.day = day;
			this.month = month;
			this.label = label;
		}

		public void evaluate()
		{
			if(TimeUtil.get("HOUR_OF_DAY") >= this.hour && TimeUtil.get("MINUTE") >= this.minute && TimeUtil.get("YEAR") >= this.year && TimeUtil.get("DATE") >= this.day && TimeUtil.get("MONTH") >= this.month)
				StoryCore.jump(label, this);
		}
	}
	
	public static class GoalEvent extends Event
	{
		private String server, label;
		
		public GoalEvent(String serverName, String label)
		{
			this.server = serverName;
			this.label = label;
		}

		public void evaluate()
		{
			if(Processor.getInstance(server) == null)
				StoryCore.jump(label, this);
		}
	}
}
