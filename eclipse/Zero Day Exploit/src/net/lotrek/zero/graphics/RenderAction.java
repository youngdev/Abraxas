package net.lotrek.zero.graphics;

import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;

import org.lwjgl.opengl.Display;

public class RenderAction<T>
{
	private Method toInvoke;
	private Object[] arguments;
	private T subject;
	private boolean doubleRender;
	
	public RenderAction(Method method, T subject, boolean doubleLayer, Object...args)
	{
		this.arguments = args;
		this.toInvoke = method;
		this.subject = subject;
		this.doubleRender = doubleLayer;
	}
	
	public void invoke()
	{
		try {
			this.toInvoke.invoke(this.subject, this.arguments);
			if (doubleRender) {
				Display.update();
				this.toInvoke.invoke(this.subject, this.arguments);
				Display.update();
			}
		} catch (IllegalAccessException | IllegalArgumentException
				| InvocationTargetException e) {
			e.printStackTrace();
		}
	}
	
	public String getName()
	{
		return toInvoke.getName();
	}
	
	public String toString()
	{
		return this.getName();
	}
}
