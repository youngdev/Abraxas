package com.fifthdimensionsoftware.zero.tools;

import org.lwjgl.input.Mouse;
import org.newdawn.slick.AppGameContainer;
import org.newdawn.slick.Color;
import org.newdawn.slick.Graphics;

import com.fifthdimensionsoftware.zero.ZeroDayExploit;
import com.fifthdimensionsoftware.zero.asm.Processor;
import com.fifthdimensionsoftware.zero.graphics.GraphicsUtil;

public class GameUtil
{
	private static int gameState = 0;
	
	public static void initPregame()
	{
		if(gameState == 0)
		{
			
		}else
			ZeroDayExploit.throwFatal("Attemped to initialize the pregame from an invalid state!");
	}
	
	public static void exitRuntime()
	{
		if(gameState == 2)
		{
			Processor.instance.memory = null;
			Processor.instance = null;
			System.gc();
			gameState = 0;
			
		}else
			ZeroDayExploit.throwFatal("Attemped to exit the runtime when it was probably not initialized");
	}
	
	public static void throwNonFatal(String message)
	{
		System.err.println("Processor threw an error: " + message);
		exitRuntime();
	}
	
	public static String getState()
	{
		switch(gameState)
		{
		case 0:
			return "none - 0";
		case 1:
			return "pregame - 1";
		case 2:
			return "ingame - 2";
		default:
			return "ABNORMAL - " + gameState;
		}
	}
	
	public static void renderGUI(AppGameContainer c, Graphics g)
	{
		c.setShowFPS(true);
		//g.clear();
		if(Mouse.isButtonDown(3))
			g.setColor(new Color((int) (Math.random() * 200), (int) (Math.random() * 200), (int) (Math.random() * 200)));
		if(Mouse.isButtonDown(1))
			g.clear();
		if(Mouse.isButtonDown(0))
			g.fillOval(Mouse.getX() - 5, GraphicsUtil.getScreenHeight() - Mouse.getY() - 5, 10, 10);
	}
}
