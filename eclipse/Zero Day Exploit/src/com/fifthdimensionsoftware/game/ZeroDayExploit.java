package com.fifthdimensionsoftware.game;

import com.fifthdimensionsoftware.lua.ExecutionCore;
import com.fifthdimensionsoftware.lua.TTY;

public class ZeroDayExploit {
	
	public String[] gameArgs;
	private static ZeroDayExploit instance;
	
	public static void main(String[] args)
	{
		new ZeroDayExploit().run(args);
	}
	public void run(String[] args)
	{
		this.gameArgs = args;
		if(instance == null)
		{
			instance = this;
			ExecutionCore.executeScriptAsync("main", "C:\\Users\\Andrew\\Documents\\GitHub\\Dharmayuddha\\luaj-3.0-alpha2\\examples\\lua\\hello.lua", "Music");
			System.err.println("Async Lua!");
			try {
				while(TTY.getContents("main").isEmpty())
				{}System.err.println(TTY.getContents("main"));
			} catch (Exception e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			}
//			ExecutionCore.stopAsyncScript("Music");
//			System.err.println("Killed Thread");
		}else
		{
			System.err.println("ZeroDayExploit was already instantiated! (THIS SHOULD BE IMPOSSIBLE!)");
			System.exit(1);
		}	
	}
	
	public String getArgument(int index)
	{
		return this.gameArgs[index];
	}
	
	//Return the one and only instance of the game core
	public static ZeroDayExploit getInstance()
	{
		return ZeroDayExploit.instance;
	}
}
