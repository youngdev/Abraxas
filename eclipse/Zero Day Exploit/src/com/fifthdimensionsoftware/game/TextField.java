package com.fifthdimensionsoftware.game;

import java.awt.Color;
import java.awt.Graphics;

import com.fifthdimensionsoftware.lua.ExecutionCore;


public class TextField 
{
	private Color primaryColor = Color.white, borderColor = Color.black, textColor = Color.black;
	
	int x,y,width,height;
	String text = "", func = "", script = "boot";
	public boolean isActive = false;
	
	public TextField(int x, int y, int width, int height, String func, String script)
	{
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
		this.func = func;
		this.script = script;
	}
	
	public void paint(Graphics g)
	{
		//Store the old color
		Color tmpColor = g.getColor();
		
		g.setColor(primaryColor);
		g.fillRect(x, y, width, height);
		g.setColor(borderColor);
		g.drawRect(x, y, width, height);
		g.setColor(textColor);
		if(this.isActive)
			g.drawString(text+"_", x+10, y + 11);
		else
			g.drawString(text, x+10, y + 11);
		
		//Reset the old color
		g.setColor(tmpColor);
	}
	
	public String getText()
	{
		return this.text;
	}
	
	public void setColors(Color prime, Color border, Color text)
	{
		this.primaryColor = prime;
		this.borderColor = border;
		this.textColor = text;
	}
	
	public void write(char c) 
	{
		this.write(c + "");
	}

	public void write(String character)
	{
		if(character.equals("\n") && !this.func.isEmpty())
		{
			ExecutionCore.executeFunction(this.script, this.func);
		}else
			this.text += character;
	}
	
	public void backspace()
	{
		this.text = !this.text.isEmpty() ? this.text.substring(0, this.text.length()-1) : "";
	}
}
